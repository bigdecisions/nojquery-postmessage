/*
 * nojquery-postmessage by Jeff Lee
 * a non-jQuery fork of:
 *
 * jQuery postMessage - v0.5 - 9/11/2009
 * http://benalman.com/projects/jquery-postmessage-plugin/
 *
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(j){var b,d,i=1,a,f=this,g=!1,h="postMessage",c="addEventListener",e;j[h]=function(k,m,l){if(!m){return}l=l||parent;if(has_postMessage){l[h](k,m.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(m){l.location=m.replace(/#.*$/,"")+"#"+(+new Date)+(i++)+"&"+k}}};j.receiveMessage=e=function(m,l,k){if(has_postMessage){if(m){a&&e();a=function(n){if((typeof l==="string"&&n.origin!==l)||((Object.prototype.toString.call(l)==="[object Function]")&&l(n.origin)===g)){return g}m(n)}}if(f[c]){f[m?c:"removeEventListener"]("message",a,g)}else{f[m?"attachEvent":"detachEvent"]("onmessage",a)}}else{b&&clearInterval(b);b=null;if(m){k=typeof l==="number"?l:typeof k==="number"?k:100;b=setInterval(function(){var o=document.location.hash,n=/^#?\d+&/;if(o!==d&&n.test(o)){d=o;m({data:o.replace(n,"")})}},k)}}}})(window);